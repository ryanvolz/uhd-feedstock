From 0f7ab30e93a414f3e32ac69b02b8b9ebaa49ce8c Mon Sep 17 00:00:00 2001
From: Ryan Volz <rvolz@mit.edu>
Date: Fri, 10 Aug 2018 18:07:17 -0400
Subject: [PATCH 4/4] Fix build RPATH remaining on installed libpyuhd by not
 setting it.

---
 host/python/CMakeLists.txt | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/host/python/CMakeLists.txt b/host/python/CMakeLists.txt
index 006e13cc4..aba2f35e8 100644
--- a/host/python/CMakeLists.txt
+++ b/host/python/CMakeLists.txt
@@ -39,6 +39,9 @@ target_link_libraries(pyuhd ${BOOST_PYTHON_LIBRARY} ${Boost_LIBRARIES} uhd)
 if(APPLE)
     target_link_options(pyuhd PRIVATE "LINKER:-undefined,dynamic_lookup")
 endif(APPLE)
+# skip setting pyuhd's RPATH because it is installed as a python data file so
+# the build RPATH would never be overwritten by an install RPATH
+set_target_properties(pyuhd PROPERTIES SKIP_BUILD_RPATH ON BUILD_WITH_INSTALL_RPATH OFF)
 # Copy pyuhd library to the staging directory
 add_custom_command(TARGET pyuhd
     POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy $<TARGET_FILE:pyuhd> ${CMAKE_CURRENT_BINARY_DIR}/uhd/)
-- 
2.20.1

